var UserList=function($){function e(){var e=$("window").height();$(".main-container").height(e-l),d=$(window).width()}function t(){var e=[{featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{hue:70}]},{featureType:"all",elementType:"all",stylers:[{lightness:-20}]},{featureType:"water",elementType:"all",stylers:[{lightness:80}]}],t={center:new google.maps.LatLng(0,0),zoom:4,navigationControl:!1,mapTypeControl:!1,styles:e,scrollwheel:!1};i=new google.maps.Map(document.getElementById("map"),t),defaultZoom=i.getZoom();var o=[],n=[],a=[],l=0}function o(){var e=parseInt($(a.list).find(a.node).outerWidth()),t=$(a.list).find(a.node).length,o=e*t;$(a.list).find(a.inner+":first").width(o),s=$(a.list).jScrollPane({verticalGutter:8,animateScroll:!0}).data("jsp")}function n(){function t(e){var t=e.lng(),o={path:"M 0,-1 0,1",strokeOpacity:1,strokeWeight:1,scale:3},n=new google.maps.Marker({position:e,map:i,icon:theme_dir+"/images/dot.png"}),a=[e,new google.maps.LatLng(0,r)],l=new google.maps.Polyline({path:a,strokeOpacity:0,strokeColor:"#fff",zIndex:2,icons:[{icon:o,offset:"0",repeat:"10px"}],map:i})}e(),o();var n=6,a=[],l=0,r=0,s=n/365222;if("undefined"==typeof user_data)return!1;var d=new google.maps.Geocoder;for(var u in user_data){var g=user_data[u];if(g.location_latitude&&g.location_longitude){var f=new google.maps.LatLng(g.location_latitude,g.location_longitude);t(f)}else{continue;var p=g.field_field_city[0].raw.value,w=g.field_field_country[0].raw.value,m=p+" , "+w;d.geocode({location:c},function(e,o){if(o==google.maps.GeocoderStatus.OK){var n=e[0].geometry.location;t(n)}})}r+=s}var v=new google.maps.LatLng(0,l),y=new google.maps.LatLng(0,r),h={zIndex:2,geodesic:!0,lineLength:r,path:[v,y],strokeColor:"#ff0000",map:i,strokeWeight:1,strokeOpacity:1},_=new google.maps.Polyline(h)}var i,a={list:$(".view-list-users.view-display-id-logged_in").length?".view-list-users.view-display-id-logged_in":".view-list-users.view-display-id-logged_out",inner:".view-inner",node:".views-row"},l=$("#map").height(),r=$(a.list),s,d=$(window).width();t(),n(),$(a.node).hover(function(){$(this).find(".person-wrapper").addClass("active")},function(){$(this).hasClass("current-user")||$(this).find(".person-wrapper").removeClass("active")}),r.mousewheel(function(e,t){s.scrollByX(8*-t),e.preventDefault()}),$(".fields").mousewheel(function(e){e.stopPropagation()}),this.goToCurrentUser=function(){$user=$(".current-user"),$user.length&&setTimeout(function(){s.scrollTo($user.offset().left+.5*$user.width()-.5*d)},300)}};window.onload=function(){var $=jQuery.noConflict();if("undefined"==typeof user_data)throw"Did not get user data!";var e=new UserList($);e.goToCurrentUser()};